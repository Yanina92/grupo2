<!DOCTYPE html>
<html lang="en">
    <%- include('../partials/head') %>
<body class="grid-container">
    <header class="nav-header">
        <%- include('../partials/header'); %>
    </header>
        <%- include('../partials/nav-bar') %>

    <main class="main-content">        
        <section class="section-login-container">           
                <form class="form-login" action="/users/register" method="POST" enctype="multipart/form-data">
                    <br> 
                    <div class='div-formbox-user'>
                        <input name="first_name" placeholder="Nombre" type='text' class="input-user-name <%= locals.errors && errors.first_name ? 'is-invalid':null%>" value="<%= locals.oldData ? oldData.first_name : null %>"  required pattern="^[a-zA-Z\s]{4,}$" title="El Nombre debe tener al menos 4 caracteres"  >
                        <i class="material-icons icon-login">perm_identity</i>       
                    </div>
                    <% if (locals.errors && errors.firstName) { %>
                        <div class="text-danger">
                            <%= errors.firstName.msg %>
                        </div>
                    <% } %>
                    <div class='div-formbox-user'>
                        <input name="last_name" placeholder="Apellido" type='text' class="input-user-name <%= locals.errors && errors.lastName ? 'is-invalid' : null%>" value="<%= locals.oldData ? oldData.last_name : null %>" required pattern="^[a-zA-Z\s]{4,}$" title="El Apellido debe tener al menos 4 caracteres"  >
                        <i class="material-icons icon-login">perm_identity</i>
                    </div>
                    <% if (locals.errors && errors.lastName) { %>
                        <div class='text-danger'>
                            <%= errors.lastName.msg %>
                        </div>
                    <% } %>
                    <div class ='div-formbox-email'>
                        <input name="email" placeholder="Email" type='email' class="input-user-email <%= locals.errors && errors.email ? 'is-invalid' : null%>" value="<%= locals.oldData ? oldData.email : null %>" required pattern="^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$"  title='Tiene que ser un formato de mail valido "Ejemplo@example.com"'>
                        <i class="material-icons-outlined icon-login">email</i>
                    </div>
                    <% if (locals.errors && errors.email) { %>
                        <div class='text-danger'>
                            <%= errors.email.msg %>
                        </div>
                    <% } %>
                    <div class ='div-formbox-phone'>
                        <input name="phone" placeholder="Telefono" type='tel' class="input-user-phone <%= locals.errors && errors.phone ? 'is-invalid' : null%>" value="<%= locals.oldData ? oldData.phone : null %>">
                        <i class="material-icons-outlined icon-login">phone</i>
                    </div>
                    <% if (locals.errors && errors.phone) { %>
                        <div class='text-danger'>
                            <%= errors.phone.msg %>
                        </div>
                    <% } %>
                    <div class ='div-formbox-password'>
                        <input name="password" placeholder="Contraseña" type='password'class="input-user-pass <%= locals.errors && errors.password ? 'is-invalid' : null%>" value="<%= locals.oldData ? oldData.password : null %>" required pattern="^(?=\w*\d)(?=\w*[A-Z])(?=\w*[a-z])\S{8,16}$"  title='Mínimo ocho caracteres, al menos una letra mayúscula, una letra minúscula y un número'>
                        <i class="material-icons-outlined icon-login">lock</i>
                    </div>
                    <% if (locals.errors && errors.password) { %>
                        <div class='text-danger'>
                            <%= errors.password.msg %>
                        </div>
                    <% } %>
                    <div class="tipo-usuario">
                        <div class="tipo-admin">
                        <input class='input-user-phone' id='administrator' name="admin" value='1' type='radio'>
                        <label for="administrator">Administrador</label>
                        </div>
                        <div class="tipo-client">
                        <input class='input-user-phone' id='customer' name="admin" value='0' type='radio'>
                        <label for="customer">Cliente</label>
                    </div>
                    </div>
                    <% if (locals.errors && errors.admin) { %>
                        <div class='text-danger'>
                            <%= errors.admin.msg %>
                        </div>
                    <% } %>
                    <br>
                    <div>
                        <label class="imagen-perfil"><b>Imagen de perfil</b></label>
                        <input class="imagen-login" name="image" type='file' required pattern="(?i)\.(jpg|png|gif)$" required>
                        <i class="fas fa-portrait"> </i>
                    </div>
                    <% if (locals.errors && errors.image) { %>
                        <div class='text-danger'>
                            <%= errors.image.msg %>
                        </div>
                    <% } %>
                    <br>
                    <div class="form-button-container">
                        <a href="/" class="link-form-button">Cancelar</a>
                        <button class="button-standar" type="submit" value="">Register</button>
                    </div>
                  
                    <br>
                </form>
        </section>
    </main>

    <footer class="nav-footer">
        <%- include('../partials/footer'); %>
    </footer>
    <script src="/js/usersValidations.js"></script>
</body>
</html>
